{"name":"Anonymous","input":["const discord = require(\"discord.js\");","const fs = require(\"fs\");","const config = require(\"../config\");","const mysql = require('mysql')","","module.exports.run = async (bot, message, args) => {","","    message.delete().catch( error =>{","        return;","    });","","","    var errorEmbed = new discord.MessageEmbed()","      .setDescription(`:x: **Error:** usage: ban <member> <reason>`)","      .setFooter('<> => Required | [] => Extra');","","    if(!message.member.hasPermission('BAN_MEMBERS')) return message.channel.send(\":x: **PERMISSION YOU NEED:** BAN_MEMBERS\");","","    if (!message.guild.me.hasPermission(\"BAN_MEMBERS\")) return message.channel.send(\":x: **PERMISSION I NEED:** BAN_MEMBERS\");"," ","    if (!args[0]) return message.channel.send(errorEmbed);","","    if (!args[1]) return message.channel.send(errorEmbed);","","    var banUser = message.guild.member(message.mentions.users.first() || message.guild.members.get(args[0]));","    var reason = args.slice(1).join(\" \");","","    if (!banUser) return message.reply(errorEmbed);","","    var embed2 = new discord.MessageEmbed()","    .setColor(\"#ff0000\")","    .setThumbnail(message.guild.iconURL())","    .setTimestamp()","    .setFooter(`${bot.user.username}`)","    .setDescription(`Dear ${banUser},\\nYou has been banned from **${message.guild.name}**.\\n The reason for this ban is: ${reason}.\\nDo you want a unban? [Click here](${config.domain}:${config.port}/unban/${message.guild.id})`)","","    banUser.send(embed2).catch(err => {","        var errorEmbed = new discord.MessageEmbed()","        .setDescription(`:x: **Error:** This user's dm's are disabled`)","        .setFooter('<> => Required | [] => Extra');","","        if (err) message.channel.send(errorEmbed);","        if (err) console.log(err);","    }).then(() => {","  var embed = new discord.MessageEmbed()","        .setColor(\"#8e2430\")","        .setTitle(\": Ban :\")","        .setThumbnail(banUser.user.displayAvatarURL())","        .setFooter(banUser.username, message.author.displayAvatarURL())","        .setTimestamp()","        .setDescription(`**Member:** ${banUser} (${banUser.id})\\n**By:** ${message.author}\\n**Reason: ** ${reason}`)","        .setFooter(`${bot.user.username}`)","","        if(!message.guild.channels.cache.find(c => c.name == \"â€¢ðŸ¤–mod-log\")) {","            message.guild.channels.create('â€¢ðŸ¤–mod-log', { type: 'text' }).then(() => {","                message.guild.channels.cache.find(c => c.name == \"â€¢ðŸ¤–mod-log\").send(embed);","            })","        }else{","            message.guild.channels.cache.find(c => c.name == \"â€¢ðŸ¤–mod-log\").send(embed)","        }","","    banUser.ban(reason).catch(err => {","","        var errorEmbed = new discord.MessageEmbed()","        .setDescription(`:x: **Error:** Something goes wrong by banning this user`)","        .setFooter('<> => Required | [] => Extra');","","        if (err) return message.channel.send(errorEmbed);","","    }); ","","    let historyJson = require('../json/history.json');","","        historyJson[message.guild.id][message.author.id] = {","          bans: parseInt(historyJson[message.guild.id][message.author.id].bans + 1),","          kicks: parseInt(historyJson[message.guild.id][message.author.id].kicks),","          warns: parseInt(historyJson[message.guild.id][message.author.id].warns),","          unbans: parseInt(historyJson[message.guild.id][message.author.id].unbans),","          unwarns: parseInt(historyJson[message.guild.id][message.author.id].unwars),","          banned: \"trues\"","        }","    ","      fs.writeFile(\"./json/history.json\", JSON.stringify(historyJson), (err) => {","        if (err) console.log(err);","      });","","","    ","  });","","}","","module.exports.help = {","    name: \"ban\"","}"],"date":"2020-09-22T09:28:07.723Z"}